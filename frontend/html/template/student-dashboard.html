<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Dreams LMS is a powerful Learning Management System template designed for educators, training institutions, and businesses. Manage courses, track student progress, conduct virtual classes, and enhance e-learning experiences with an intuitive and feature-rich platform.">
		<meta name="keywords" content="LMS template, Learning Management System, e-learning software, online course platform, student management, education portal, virtual classroom, training management system, course tracking, online education">
		<meta name="author" content="Dreams Technologies">
		<meta name="robots" content="index, follow">
		
		<title>Adaptive LMS | Student Dashboard</title>

		<link rel="shortcut icon" href="assets/img/favicon.png"> 
		<link rel="apple-touch-icon" href="assets/img/apple-icon.png">
		<link rel="stylesheet" href="assets/css/bootstrap.min.css">
		<link rel="stylesheet" href="assets/plugins/fontawesome/css/fontawesome.min.css">
		<link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css">
		<link rel="stylesheet" href="assets/css/feather.css">
		<link rel="stylesheet" href="assets/css/iconsax.css">
		<link rel="stylesheet" href="assets/css/style.css">
		<style>
			.header-nav { padding: 10px 0; }
			.navbar-logo { max-width: 180px; }
			.navbar-logo img { width: 100%; height: auto; }
			.logo-white, .logo-dark { display: flex; align-items: center; }
			.profile-card { border-radius: 15px; }
			.card { box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: transform 0.3s; }
			.card:hover { transform: translateY(-5px); }
			.quiz-ans-card { position: relative; overflow: hidden; }
			.quiz-ans-bg1, .quiz-ans-bg2 { opacity: 0.1; }
			.settings-sidebar ul li a { padding: 10px; border-radius: 5px; }
			.settings-sidebar ul li a.active { background-color: #f0f4ff; }
			.course-item-two { margin-bottom: 20px; }
			/* Dark mode styles */
			body.dark-mode {
				background-color: #121212;
				color: #e0e0e0;
			}
			body.dark-mode .card,
			body.dark-mode .settings-sidebar,
			body.dark-mode .footer {
				background-color: #1e1e1e;
				border-color: #333333;
			}
			body.dark-mode .profile-card {
				background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
			}
			body.dark-mode .quiz-ans-card {
				background-color: #252525;
			}
			body.dark-mode .text-white,
			body.dark-mode .link-light,
			body.dark-mode a:not(.btn) {
				color: #e0e0e0 !important;
			}
			body.dark-mode .btn-primary {
				background-color: #3a6cff;
				border-color: #3a6cff;
			}
			body.dark-mode .btn-dark {
				background-color: #444444;
				border-color: #444444;
			}
			body.dark-mode .settings-sidebar ul li a.active {
				background-color: #3a3a3a;
				color: #ffffff;
			}
			body.dark-mode .breadcrumb-bar {
				background-color: #1e1e1e;
			}
			body.dark-mode .course-content h6 a,
			body.dark-mode .course-content .link-default {
				color: #e0e0e0;
			}
			body.dark-mode .badge-light {
				background-color: #333333;
				color: #e0e0e0;
			}
			body.dark-mode .text-secondary {
				color: #bbbbbb !important;
			}
		</style>
	</head>
	<body>
		<div class="main-wrapper">
			<header class="header-two">
				<div class="container">
					<div class="header-nav d-flex align-items-center">
						<div class="navbar-header">
							<a id="mobile_btn" href="javascript:void(0);">
								<span class="bar-icon"><span></span><span></span><span></span></span>
							</a>
							<div class="navbar-logo">
								<a class="logo-white header-logo" href="index-3.html"><img src="assets/img/logo.png" class="logo" alt="Logo"></a>
								<a class="logo-dark header-logo" href="index-3.html"><img src="assets/img/logo.png" class="logo" alt="Logo"></a>
							</div>
						</div>
						<div class="main-menu-wrapper">								
							<div class="menu-header">
								<a href="index-3.html" class="menu-logo"><img src="assets/img/logo.png" class="img-fluid" alt="Logo"></a>
								<a id="menu_close" class="menu-close" href="javascript:void(0);"><i class="fas fa-times"></i></a>
							</div>
						</div>
						<div class="header-btn d-flex align-items-center ms-auto">
							<div class="icon-btn me-2">
								<a href="javascript:void(0);" id="dark-mode-toggle" class="theme-toggle activate"><i class="isax isax-sun-15"></i></a>
								<a href="javascript:void(0);" id="light-mode-toggle" class="theme-toggle"><i class="isax isax-moon"></i></a>
							</div>
							
							<div class="dropdown profile-dropdown">
								<a href="javascript:void(0);" class="d-flex align-items-center" data-bs-toggle="dropdown">
									<span class="avatar"><img id="dropdown-profile-img" src="assets/img/default-profile.png" alt="Img" class="img-fluid rounded-circle"></span>
								</a>
								<div class="dropdown-menu dropdown-menu-end">
									<div class="profile-header d-flex align-items-center">
										<div class="avatar"><img id="dropdown-profile-img2" src="assets/img/default-profile.png" alt="Img" class="img-fluid rounded-circle"></div>
										<div><h6 id="dropdown-name"></h6><p id="dropdown-email"></p></div>
									</div>
									<ul class="profile-body">
										<li><a class="dropdown-item d-inline-flex align-items-center rounded fw-medium" href="student-profile.html"><i class="isax isax-security-user me-2"></i>My Profile</a></li>
										<li><a class="dropdown-item d-inline-flex align-items-center rounded fw-medium" href="student-quiz.html"><i class="isax isax-award me-2"></i>Quiz Attempts</a></li>
										<li><a class="dropdown-item d-inline-flex align-items-center rounded fw-medium" href="student-settings.html"><i class="isax isax-setting-2 me-2"></i>Settings</a></li>										
									</ul>
									<div class="profile-footer">
										<a href="javascript:void(0);" id="logout-btn" class="btn btn-secondary d-inline-flex align-items-center justify-content-center w-100"><i class="isax isax-logout me-2"></i>Logout</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</header>
			<div class="breadcrumb-bar text-center">
				<div class="container">
					<div class="row">
						<div class="col-md-12 col-12">
							<h2 class="breadcrumb-title mb-2">Student Dashboard</h2>
							<nav aria-label="breadcrumb">
								<ol class="breadcrumb justify-content-center mb-0">
									<li class="breadcrumb-item active" aria-current="page">Dashboard</li>
								</ol>
							</nav>
						</div>
					</div>
				</div>
			</div>
			<div class="content">
				<div class="container">
					<div class="profile-card overflow-hidden bg-blue-gradient2 mb-5 p-5">
						<div class="profile-card-bg"><img src="assets/img/bg/card-bg-01.png" class="profile-card-bg-1" alt=""></div>
						<div class="row align-items-center row-gap-3">
							<div class="col-lg-6">
								<div class="d-flex align-items-center">
									<span class="avatar avatar-xxl avatar-rounded me-3 border border-white border-2 position-relative">
										<img id="profile-img" src="assets/img/default-profile.png" alt="">
										<span class="verify-tick"><i class="isax isax-verify5"></i></span>
									</span>
									<div>
										<h5 class="mb-1 text-white d-inline-flex align-items-center" id="profile-name"><a href="student-details.html"></a><a href="student-profile.html" class="link-light fs-16 ms-2"><i class="isax isax-edit-2"></i></a></h5>
										<p class="text-light">Student</p>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-3 theiaStickySidebar">
							<div class="settings-sidebar">
								<div>
									<h6 class="mb-3">Main Menu</h6>
									<ul class="mb-3 pb-1">
										<li><a href="student-dashboard.html" class="d-inline-flex align-items-center active"><i class="isax isax-grid-35 me-2"></i>Dashboard</a></li>
										<li><a href="student-profile.html" class="d-inline-flex align-items-center"><i class="fa-solid fa-user me-2"></i>My Profile</a></li>
										<li><a href="student-courses.html" class="d-inline-flex align-items-center"><i class="isax isax-teacher5 me-2"></i>Enrolled Courses</a></li>
										<li><a href="student-certificates.html" class="d-inline-flex align-items-center"><i class="isax isax-note-215 me-2"></i>My Certificates</a></li>
										<li><a href="student-wishlist.html" class="d-inline-flex align-items-center"><i class="isax isax-heart5 me-2"></i>Wishlist</a></li>
										<li><a href="student-reviews.html" class="d-inline-flex align-items-center"><i class="isax isax-star5 me-2"></i>Reviews</a></li>
										<li><a href="student-quiz.html" class="d-inline-flex align-items-center"><i class="isax isax-award5 me-2"></i>My Quiz Attempts</a></li>
										<li><a href="student-order-history.html" class="d-inline-flex align-items-center"><i class="isax isax-shopping-cart5 me-2"></i>Order History</a></li>
										<li><a href="student-referral.html" class="d-inline-flex align-items-center"><i class="isax isax-tag-user5 me-2"></i>Referrals</a></li>
										<li><a href="student-messages.html" class="d-inline-flex align-items-center"><i class="isax isax-messages-35 me-2"></i>Messages</a></li>
										<li><a href="student-tickets.html" class="d-inline-flex align-items-center"><i class="isax isax-ticket5 me-2"></i>Support Tickets</a></li>
									</ul>
									<hr>
									<h6 class="mb-3">Account Settings</h6>
									<ul>
										<li><a href="student-settings.html" class="d-inline-flex align-items-center"><i class="isax isax-setting-25 me-2"></i>Settings</a></li>
										<li><a href="javascript:void(0);" id="logout-sidebar" class="d-inline-flex align-items-center"><i class="isax isax-logout5 me-2"></i>Logout</a></li>
									</ul>
								</div>
							</div>
						</div>
						<div class="col-lg-9">
							<div class="card bg-light quiz-ans-card">
								<img src="assets/img/shapes/withdraw-bg1.svg" class="quiz-ans-bg1" alt="img">
								<img src="assets/img/shapes/withdraw-bg2.svg" class="quiz-ans-bg2" alt="img">
								<div class="card-body">
									<div class="row align-items-center">
										<div class="col-md-8">
											<div>
												<h6 class="mb-1" id="quiz-title">Quiz : No Quiz Attempted</h6>
												<p>Answered : <span id="quiz-answered">0/0</span></p>
											</div>
										</div>
										<div class="col-md-4">
											<div class="text-end">
												<a href="student-quiz.html" class="btn btn-primary rounded-pill">Continue Quiz</a>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6 col-xl-4">
									<div class="card">
										<div class="card-body">
											<div class="d-flex align-items-center">
												<span class="icon-box bg-primary-transparent me-2 me-xxl-3 flex-shrink-0"><img src="assets/img/icon/graduation.svg" alt=""></span>
												<div><span class="d-block">Enrolled Courses</span><h4 class="fs-24 mt-1" id="enrolled-courses">0</h4></div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-6 col-xl-4">
									<div class="card">
										<div class="card-body">
											<div class="d-flex align-items-center">
												<span class="icon-box bg-secondary-transparent me-2 me-xxl-3 flex-shrink-0"><img src="assets/img/icon/book.svg" alt=""></span>
												<div><span class="d-block">Active Courses</span><h4 class="fs-24 mt-1" id="active-courses">0</h4></div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-6 col-xl-4">
									<div class="card">
										<div class="card-body">
											<div class="d-flex align-items-center">
												<span class="icon-box bg-success-transparent me-2 me-xxl-3 flex-shrink-0"><img src="assets/img/icon/bookmark.svg" alt=""></span>
												<div><span class="d-block">Completed Courses</span><h4 class="fs-24 mt-1" id="completed-courses">0</h4></div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<h5 class="mb-3 fs-18">Recently Enrolled Courses</h5>
							<div class="row" id="recent-courses"><p>No courses enrolled yet.</p></div>
							<div>
								<div class="row">
									<div class="col-xl-7"></div>
									<div class="col-xl-5">
										<div class="card mb-0">
											<div class="card-body">
												<h5 class="mb-3 fs-18 border-bottom pb-3">Latest Quizzes</h5>
												<div id="latest-quizzes"><p>No quizzes attempted yet.</p></div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<footer class="footer">
				<div class="footer-bg">
					<img src="assets/img/bg/footer-bg-01.png" class="footer-bg-1" alt="">
					<img src="assets/img/bg/footer-bg-02.png" class="footer-bg-2" alt="">
				</div>
				<div class="footer-top">
					<div class="container">
						<div class="row row-gap-4">
							<div class="col-lg-4">
								<div class="footer-about">
									<div class="footer-logo"><img src="assets/img/logo.png" alt=""></div>
									<p>Platform designed to help organizations, educators, and learners manage, deliver, and track learning and training activities.</p>
									<div class="d-flex align-items-center">
										<a href="#" class="me-2"><img src="assets/img/icon/appstore.svg" alt=""></a>
										<a href="#"><img src="assets/img/icon/googleplay.svg" alt=""></a>
									</div>
								</div>
							</div>
							<div class="col-lg-8">
								<div class="row row-gap-4">
									<div class="col-lg-3">
										<div class="footer-widget footer-menu">
											<h5 class="footer-title">For Instructor</h5>
											<ul><li><a href="course-grid.html">Search Mentors</a></li><li><a href="login.html">Login</a></li><li><a href="register.html">Register</a></li><li><a href="course-list.html">Booking</a></li><li><a href="student-dashboard.html">Students Dashboard</a></li></ul>
										</div>
									</div>
									<div class="col-lg-3">
										<div class="footer-widget footer-menu">
											<h5 class="footer-title">For Student</h5>
											<ul><li><a href="javascript:void(0);">Appointments</a></li><li><a href="instructor-message.html">Chat</a></li><li><a href="login.html">Login</a></li><li><a href="register.html">Register</a></li><li><a href="instructor-dashboard.html">Instructor Dashboard</a></li></ul>
										</div>
									</div>
									<div class="col-lg-6">
										<div class="footer-widget footer-contact">
											<h5 class="footer-title">Newsletter</h5>
											<div class="subscribe-input">
												<form action="javascript:void(0);">
													<input type="email" class="form-control" placeholder="Enter your Email Address">
													<button type="submit" class="btn btn-primary btn-sm inline-flex align-items-center"><i class="isax isax-send-2 me-1"></i>Subscribe</button>
												</form>
											</div>
											<div class="footer-contact-info">
												<div class="footer-address d-flex align-items-center"><img src="assets/img/icon/icon-20.svg" alt="Img" class="img-fluid me-2"><p>3556 Beech Street, San Francisco,<br>California, CA 94108</p></div>
												<div class="footer-address d-flex align-items-center"><img src="assets/img/icon/icon-19.svg" alt="Img" class="img-fluid me-2"><p><a href="mailto:support@dreamslms.com">support@AdaptiveLMS.com</a></p></div>
												<div class="footer-address d-flex align-items-center"><img src="assets/img/icon/icon-21.svg" alt="Img" class="img-fluid me-2"><p>+19 123-456-7890</p></div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="footer-bottom">
					<div class="container">
						<div class="row row-gap-2">
							<div class="col-md-6"><div class="text-center text-md-start"><p class="text-white">Copyright &copy; 2025 AdaptiveLMS. All rights reserved.</p></div></div>
							<div class="col-md-6"><div><ul class="d-flex align-items-center justify-content-center justify-content-md-end footer-link"><li><a href="terms-and-conditions.html">Terms & Conditions</a></li><li><a href="privacy-policy.html">Privacy Policy</a></li></ul></div></div>
						</div>
					</div>
				</div>
			</footer>
		</div>
		<script src="assets/js/jquery-3.7.1.min.js" type="text/javascript"></script>
		<script src="assets/js/bootstrap.bundle.min.js" type="text/javascript"></script>
		<script src="assets/plugins/theia-sticky-sidebar/ResizeSensor.js" type="text/javascript"></script>
		<script src="assets/plugins/theia-sticky-sidebar/theia-sticky-sidebar.js" type="text/javascript"></script>
		<script src="assets/js/script.js" type="text/javascript"></script>
		<script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
		<script>
			$(document).ready(function() {
				// Show Alert Function
				function showAlert(message, type = 'danger') {
					if ($('#toastContainer').length === 0) {
						$('body').append(`<div id="toastContainer" class="position-fixed top-0 end-0 p-3" style="z-index: 1055;"></div>`);
					}
					const toastId = 'toast-' + new Date().getTime();
					const bgClass = type === 'success' ? 'bg-success text-white' : 'bg-danger text-white';
					const toastHtml = `
						<div id="${toastId}" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="4000">
							<div class="toast-body ${bgClass} d-flex align-items-center justify-content-between p-3">
								<span>${message}</span>
								<button type="button" class="btn-close btn-close-white ms-2" data-bs-dismiss="toast" aria-label="Close"></button>
							</div>
						</div>`;
					$('#toastContainer').append(toastHtml);
					const toastElement = $(`#${toastId}`);
					toastElement.css({ opacity: 0, transform: 'translateY(-20px)' });
					toastElement.animate({ opacity: 1, transform: 'translateY(0)' }, 300);
					toastElement.toast('show');
					toastElement.on('hidden.bs.toast', function () {
						$(this).animate({ opacity: 0, transform: 'translateY(-20px)' }, 300, function () {
							$(this).remove();
						});
					});
				}

				// Dark/Light mode toggle functionality
				$('#dark-mode-toggle').on('click', function() {
					$('body').removeClass('dark-mode');
					$('#dark-mode-toggle').removeClass('activate');
					$('#light-mode-toggle').addClass('activate');
				});

				$('#light-mode-toggle').on('click', function() {
					$('body').addClass('dark-mode');
					$('#light-mode-toggle').removeClass('activate');
					$('#dark-mode-toggle').addClass('activate');
				});

				// Check if user is logged in
				const token = localStorage.getItem('token');
				if (!token) {
					showAlert('Please login first.', 'danger');
					setTimeout(() => {
						window.location.href = 'login.html';
					}, 1500);
					return;
				}
				let decoded;
				try {
					decoded = jwt_decode(token);
				} catch (error) {
					showAlert('Invalid token. Please login again.', 'danger');
					localStorage.removeItem('token');
					setTimeout(() => {
						window.location.href = 'login.html';
					}, 1500);
					return;
				}
				if (decoded.role !== 'student') {
					showAlert('Access denied: This dashboard is for students only.', 'danger');
					setTimeout(() => {
						window.location.href = 'login.html';
					}, 1500);
					return;
				}

				// Load profile data
				function loadProfile() {
					$.ajax({
						url: 'http://localhost:5000/api/auth/profile',
						type: 'GET',
						headers: { 'Authorization': 'Bearer ' + token },
						cache: false,
						success: function(profile) {
							console.log('Profile Data Loaded:', profile);
							const imgSrc = profile.profileImage ? `${profile.profileImage}?t=${new Date().getTime()}` : 'assets/img/default-profile.png';
							$('#profile-name a:first').text(profile.name || 'Student Name');
							$('#dropdown-email').text(profile.email || 'No Email');
							$('#profile-img').attr('src', imgSrc);
							$('#dropdown-profile-img').attr('src', imgSrc);
							$('#dropdown-profile-img2').attr('src', imgSrc);
							$('#dropdown-name').text(profile.name || 'Student Name');
						},
						error: function(xhr) {
							console.error('Error loading profile:', xhr.responseText);
							showAlert('Error loading profile.', 'danger');
							if (xhr.status === 401) {
								localStorage.removeItem('token');
								showAlert('Session expired. Please login again.', 'danger');
								setTimeout(() => {
									window.location.href = 'login.html';
								}, 1500);
							}
						}
					});
				}

				// Load dashboard data
				function loadDashboardData() {
					$.ajax({
						url: 'http://localhost:5000/api/student/dashboard',
						type: 'GET',
						headers: { 'Authorization': 'Bearer ' + token },
						cache: false,
						success: function(response) {
							console.log('Dashboard Data Loaded:', response);
							$('#enrolled-courses').text(response.enrolledCourses !== undefined ? response.enrolledCourses : 0);
							$('#active-courses').text(response.activeCourses !== undefined ? response.activeCourses : 0);
							$('#completed-courses').text(response.completedCourses !== undefined ? response.completedCourses : 0);
							$('#quiz-answered').text(response.quizAnswered || '0/0');
							$('#quiz-title').text('Quiz: ' + (response.quizTitle || 'No Quiz Attempted'));

							if (response.recentCourses && response.recentCourses.length > 0) {
								let recentCoursesHTML = '';
								response.recentCourses.forEach(course => {
									recentCoursesHTML += `
										<div class="col-xl-4 col-md-6">
											<div class="course-item-two course-item mx-0">
												<div class="course-img">
													<a href="course-details.html?id=${course.id}">
														<img src="${course.image || 'assets/img/course/course-01.jpg'}" alt="img" class="img-fluid">  
													</a>
													<div class="position-absolute start-0 top-0 d-flex align-items-start w-100 z-index-2 p-3">
														${course.discount ? `<div class="badge text-bg-danger">${course.discount}% off</div>` : ''}
														<a href="javascript:void(0);" class="fav-icon ms-auto"><i class="isax isax-heart"></i></a>
													</div>
												</div>
												<div class="course-content">
													<div class="d-flex justify-content-between mb-2">
														<div class="d-flex align-items-center">
															<a href="instructor-details.html" class="avatar avatar-sm">
																<img src="${course.instructorImage || 'assets/img/user/user-29.jpg'}" alt="img" class="img-fluid avatar avatar-sm rounded-circle">
															</a>
															<div class="ms-2">
																<a href="instructor-details.html" class="link-default fs-14">${course.instructorName || 'Unknown'}</a>
															</div>
														</div>
														<span class="badge badge-light rounded-pill bg-light d-inline-flex align-items-center fs-13 fw-medium mb-0">${course.category || 'Design'}</span>
													</div>
													<h6 class="title mb-2"><a href="course-details.html?id=${course.id}">${course.title || 'No Title'}</a></h6>
													<p class="d-flex align-items-center mb-3"><i class="fa-solid fa-star text-warning me-2"></i>${course.rating || '4.5'} (${course.reviews || '100'} Reviews)</p>
													<div class="d-flex align-items-center justify-content-between">
														<h5 class="text-secondary mb-0">$${course.price || '100'}</h5>
														<a href="course-details.html?id=${course.id}" class="btn btn-dark btn-sm d-inline-flex align-items-center">View Course<i class="isax isax-arrow-right-3 ms-1"></i></a>
													</div>
												</div>
											</div>
										</div>`;
								});
								$('#recent-courses').html(recentCoursesHTML);
							} else {
								$('#recent-courses').html('<p>No courses enrolled yet.</p>');
							}

							if (response.latestQuizzes && response.latestQuizzes.length > 0) {
								let quizzesHTML = '';
								response.latestQuizzes.forEach(quiz => {
									quizzesHTML += `
										<div class="d-flex align-items-center flex-wrap flex-md-nowrap justify-content-between row-gap-2 mb-3">
											<div>
												<h6 class="mb-1">${quiz.title || 'No Title'}</h6>
												<div class="d-flex align-items-center">
													<p>Correct Answer : ${quiz.correct || '0'}/${quiz.total || '0'}</p>
												</div>
											</div>
											<div class="circle-progress flex-shrink-0" data-value="${quiz.percentage || '0'}">
												<span class="progress-left"><span class="progress-bar border-${quiz.percentage >= 50 ? 'success' : 'danger'}"></span></span>
												<span class="progress-right"><span class="progress-bar border-${quiz.percentage >= 50 ? 'success' : 'danger'}"></span></span>
												<div class="progress-value">${quiz.percentage || '0'}%</div>
											</div>
										</div>`;
								});
								$('#latest-quizzes').html(quizzesHTML);
							} else {
								$('#latest-quizzes').html('<p>No quizzes attempted yet.</p>');
							}
						},
						error: function(xhr) {
							console.error('Error fetching dashboard data:', xhr.responseText);
							showAlert('Error fetching dashboard data.', 'danger');
							$('#enrolled-courses').text(0);
							$('#active-courses').text(0);
							$('#completed-courses').text(0);
							$('#quiz-answered').text('0/0');
							$('#quiz-title').text('Quiz: No Quiz Attempted');
							$('#recent-courses').html('<p>No courses enrolled yet.</p>');
							$('#latest-quizzes').html('<p>No quizzes attempted yet.</p>');
						}
					});
				}

				// Logout Handler
				$(document).on('click', '#logout-btn, #logout-sidebar', function (e) {
					e.preventDefault();
					console.log('Logout button clicked');
					$.ajax({
						url: 'http://localhost:5000/api/auth/logout',
						type: 'GET',
						headers: { 'Authorization': 'Bearer ' + localStorage.getItem('token') },
						success: function (response) {
							console.log('Logout success:', response);
							localStorage.removeItem('token');
							showAlert('Logout successful.', 'success');
							setTimeout(() => {
								window.location.href = 'login.html';
							}, 1500);
						},
						error: function (xhr) {
							console.error('Logout error:', xhr.responseText);
							localStorage.removeItem('token');
							showAlert('Logout successful.', 'success');
							setTimeout(() => {
								window.location.href = 'login.html';
							}, 1500);
						}
					});
				});

				// Load profile and dashboard data on page load
				loadProfile();
				loadDashboardData();

				// Listen for profile update event
				window.addEventListener('profileUpdated', function() {
					console.log('Profile updated event received');
					loadProfile();
				});

				// Auto-refresh dashboard every 30 seconds
				setInterval(loadDashboardData, 30000);
			});
		</script>
	</body>
</html>